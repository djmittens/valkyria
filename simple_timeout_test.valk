(load "src/prelude.valk")

(def {aio} (aio/await (aio/start)))

; Create slow operation and timeout
(def {slow-handle} (aio/sleep aio 1000))  ; 1000ms sleep
(def {timeout-handle} (aio/within slow-handle 50))  ; 50ms timeout

; Wait a bit for timeout to trigger
(aio/sleep aio 100)

(print "Slow handle status:")
(print (aio/status slow-handle))

(print "Timeout handle status:")  
(print (aio/status timeout-handle))

(print "Timeout handle error:")
(print (aio/error timeout-handle))

(aio/stop aio)
