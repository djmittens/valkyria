(load "src/prelude.valk")

(fun {test-fn & args} {
  (printf "test-fn called with args = ")
  (print args)
  42
})

(printf "Test 1: direct call (unpack test-fn {1 2 3})\n")
(= {r1} (unpack test-fn {1 2 3}))
(printf "r1 = ")
(print r1)

(printf "\nTest 2: via if {unpack test-fn {1 2 3}}\n")
(= {r2} (if 1 {unpack test-fn {1 2 3}} {99}))
(printf "r2 = ")
(print r2)
