; Debug fun macro execution
(def {fun} (\ {f b}  {
  (print "fun body: f =")
  (print f)
  (print "fun body: b =")
  (print b)
  (print "fun body: head f =")
  (print (head f))
  (print "fun body: tail f =")
  (print (tail f))
  (print "fun body: about to create lambda")
  (print (\ (tail f) b))
  (print "fun body: about to call def")
  (def (head f) (\ (tail f) b))
  (print "fun body: def returned")
}))

(print "Calling fun:")
(fun {add x y} {(+ x y)})

(print "After fun, is add defined?")
(print add)
