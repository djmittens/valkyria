(load "src/prelude.valk")

; Simulate what nth does
(fun {test-nth n _l} {
  select
    {(== n 1) (fst _l)}
    {otherwise 999}
})

(printf "Test 1: Call test-nth\n")
(= {result} (test-nth 1 {100 200 300}))
(printf "Result: %ld\n" result)

(printf "\nTest 2: Manual inspection\n")
(= {branches} {{(== 1 1) (+ 10 20)}})
(printf "Branches: ")
(print branches)
(= {first_branch} (fst branches))
(printf "First branch: ")
(print first_branch)
(= {condition} (fst first_branch))
(= {value} (snd first_branch))
(printf "Condition type: %ld\n" (type condition))
(printf "Value type: %ld\n" (type value))
(print value)

(shutdown 0)
