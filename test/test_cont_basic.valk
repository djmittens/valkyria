; Test basic continuation functionality
(print "=== Testing Basic Continuations ===")

; Test 1: async-reset just evaluates expression
(print "\nTest 1: async-reset evaluation")
(def {result} (async-reset (+ 1 2)))
(print "Result:" result)
(if (== result 3)
  (print "✓ Test 1 passed")
  (print "✗ Test 1 failed"))

; Test 2: async-shift creates continuation
(print "\nTest 2: async-shift continuation")
(async-reset
  (do
    (print "Before shift")
    (def {value} (async-shift {k}
      (do
        (print "Inside shift, k =" k)
        (print "k type:" (type k))
        42)))  ; Return 42 instead of calling continuation
    (print "After shift, value =" value)))

; Test 3: Resume continuation
(print "\nTest 3: Resume continuation")
(def {saved-cont} nil)
(async-reset
  (do
    (def {x} (async-shift {k}
      (do
        (= {saved-cont} k)  ; Save continuation
        100)))  ; Return 100
    (print "Got x =" x)))

(if (!= saved-cont nil)
  (do
    (print "Resuming continuation with 200...")
    (async-resume saved-cont 200))
  (print "No continuation saved"))

(print "\n=== Basic Continuation Tests Complete ===")