(load "src/prelude.valk")

(printf "Testing fst on branch:\n\n")

; Create a branch like select uses
(= {branch} {(== 1 1) (+ 2 3)})
(printf "Branch: ")
(print branch)

(printf "\nhead of branch: ")
(= {h} (head branch))
(print h)

(printf "\nunpack id (head branch): ")
(= {result} (unpack id h))
(printf "Result: ")
(print result)

(printf "\nDirect fst call: ")
(= {fst-result} (fst branch))
(printf "fst result: ")
(print fst-result)

; Now test with symbols
(printf "\n\nWith symbols:\n")
(= {n} 1)
(= {_l} {10 20})
(= {branch2} {(== n 1) (fst _l)})
(printf "Branch2: ")
(print branch2)

(printf "fst of branch2: ")
(= {fst2} (fst branch2))
(print fst2)

(shutdown 0)
