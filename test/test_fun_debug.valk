; Minimal test for fun macro issue
; The problem: def inside fun body doesn't execute

; First, define fun manually
(def {fun} (\ {f b} {
   def (head f) (\ (tail f) b)
}))

; Debug: what does the fun lambda return?
(print "Testing fun macro...")

; Try calling fun and see what happens
(def {result} (fun {add a b} {+ a b}))
(print "Result of fun call:")
(print result)

; Try to call add - this should work if def executed
(print "Attempting to call add...")
(add 10 20)
