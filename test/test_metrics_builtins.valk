; Test metrics builtins
(load "src/prelude.valk")

; Test 1: metrics/json should return a string
(println "Test 1: metrics/json returns string")
(println (metrics/json))
(println "")

; Test 2: metrics/prometheus should return a string
(println "Test 2: metrics/prometheus returns string")
(println (metrics/prometheus))
(println "")

; Test 3: metrics/counter-inc should work without labels
(println "Test 3: metrics/counter-inc without labels")
(metrics/counter-inc "test_counter")
(println "After incrementing counter, JSON:")
(println (metrics/json))
(println "")

; Test 4: metrics/counter-inc should work with labels
(println "Test 4: metrics/counter-inc with labels")
(metrics/counter-inc "test_counter_labeled" "server" "test" "port" "8080")
(println "After incrementing labeled counter, JSON:")
(println (metrics/json))
(println "")

; Test 5: Increment the same counter multiple times
(println "Test 5: Increment counter multiple times")
(metrics/counter-inc "test_counter")
(metrics/counter-inc "test_counter")
(metrics/counter-inc "test_counter")
(println "After 3 more increments, JSON:")
(println (metrics/json))
(println "")

(println "All tests passed!")
