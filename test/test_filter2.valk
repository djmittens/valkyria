(load "src/prelude.valk")
(load "src/modules/test.valk")

(test/define "test1" {true})

(printf "Step 1: Extract test\n")
(= {t1} (nth 1 *test-registry*))
(printf "Test: ")
(print t1)

(printf "\nStep 2: Extract name\n")
(= {test-name} (nth 1 t1))
(printf "Name: %s\n" test-name)

(printf "\nStep 3: Extract body\n")
(= {test-body} (nth 2 t1))
(printf "Body: ")
(print test-body)

(printf "\nStep 4: Eval body\n")
(= {result} (eval test-body))
(printf "Result: %ld\n" result)

(shutdown 0)
