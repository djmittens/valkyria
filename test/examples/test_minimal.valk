(load "src/prelude.valk")
(print "Start")

(def {double} (\ {x k} {(k (* x 2))}))

(print "Test 1")
(def {r1} (async-reset {(async-shift {k} {(double 21 k)})}))
(print "Result:" r1)

(print "Test 2")
(def {r2} (async-reset {
  (def {a} (async-shift {k} {(double 5 k)}))
  (def {b} (async-shift {k} {(double a k)}))
  b
}))
(print "Result:" r2)

(print "Done")
(shutdown 0)
