(load "src/prelude.valk")
(load "src/modules/test.valk")

(test/define "test1" {(printf "TEST1\n") true})
(test/define "test2" {(printf "TEST2\n") true})

(printf "Registry length: %ld\n" (len *test-registry*))
(printf "Registry: ")
(print *test-registry*)

(printf "\nFirst test: ")
(print (nth 1 *test-registry*))

(printf "\nCalling *test-run-one* manually:\n")
(*test-run-one* (nth 1 *test-registry*))

(printf "\nNow calling with map:\n")
(map *test-run-one* *test-registry*)

(shutdown 0)
