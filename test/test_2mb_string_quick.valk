; Quick 2MB+ string test - using simpler incremental build
(load "src/prelude.valk")

(print "=== Quick 2MB String Test ===")

; Build a base string of 64KB first (64 * 1024 = 65536)
; Each 64-char block x 1024 = 65536 bytes
(do {
  ; Start with 64 bytes
  (= {b64} "0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF")
  (print (str "64B: " (len b64)))

  ; 1KB = 16 x 64B (really only 1024 bytes)
  (= {kb1} (str b64 b64 b64 b64 b64 b64 b64 b64 b64 b64 b64 b64 b64 b64 b64 b64))
  (print (str "1KB: " (len kb1)))

  ; 16KB = 16 x 1KB
  (= {kb16} (str kb1 kb1 kb1 kb1 kb1 kb1 kb1 kb1 kb1 kb1 kb1 kb1 kb1 kb1 kb1 kb1))
  (print (str "16KB: " (len kb16)))

  ; 256KB = 16 x 16KB
  (= {kb256} (str kb16 kb16 kb16 kb16 kb16 kb16 kb16 kb16 kb16 kb16 kb16 kb16 kb16 kb16 kb16 kb16))
  (print (str "256KB: " (len kb256)))

  ; 1MB = 4 x 256KB
  (= {mb1} (str kb256 kb256 kb256 kb256))
  (print (str "1MB: " (len mb1)))

  ; 2MB = 2 x 1MB
  (= {mb2} (str mb1 mb1))
  (print (str "2MB: " (len mb2)))

  (print "=== SUCCESS: 2MB+ string created! ===")
})
