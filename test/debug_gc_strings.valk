(load "src/prelude.valk")
(sys/log/set-level "error")

(println "Creating string list...")
(def {slist}
     (map (\ {n} {"test string"}) (range 1 10)))
(println "String list created, length: %ld" (len slist))

(println "Calling mem/stats...")
(mem/stats)

(println "Lowering GC threshold...")
(def {thr} (mem/gc/set-threshold 1000))
(println "Old threshold: %ld" thr)

(println "Allocating more to trigger GC...")
(def {more} (range 1 100))
(println "Done")
