(load "src/prelude.valk")
(load "src/modules/test.valk")

(printf "Registry: ")
(print *test-registry*)
(printf "Len: %ld\n" (len *test-registry*))

(test/define "test1" {true})

(printf "\nAfter defining test1:\n")
(printf "Registry: ")
(print *test-registry*)
(printf "Len: %ld\n" (len *test-registry*))

(printf "\nExtracting test:\n")
(= {t1} (nth 1 *test-registry*))
(printf "Test: ")
(print t1)

(printf "\nExtracting name:\n")
(= {name} (nth 1 t1))
(printf "Name: %s\n" name)

(printf "\nExtracting body:\n")
(= {body} (nth 2 t1))
(printf "Body: ")
(print body)

(shutdown 0)
