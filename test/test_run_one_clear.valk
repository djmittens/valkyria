(load "src/prelude.valk")

; Redefine fst without eval
(fun {myfst _l} {head _l})

(printf "Test 1: myfst\n")
(= {result} (myfst {100 200 300}))
(printf "Result type: %ld, len: %ld\n" (type result) (len result))
(print result)

(printf "\nTest 2: Can we use it in expressions?\n")
; This won't work because result is a qexpr
; (printf "Value: %ld\n" result)

(printf "\nTest 3: Try with eval in select\n")
(= {pair} {true 500})
(printf "Pair: ")
(print pair)
(= {cond} (head pair))
(printf "Cond (qexpr): ")
(print cond)
(= {evaled_cond} (eval cond))
(printf "Evaled cond: %ld\n" evaled_cond)

(shutdown 0)
