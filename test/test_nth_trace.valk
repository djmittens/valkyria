(load "src/prelude.valk")

(printf "Manual trace of nth:\n")
(= {n} 1)
(= {_l} {100 200 300})

(printf "n=%ld, list len=%ld\n" n (len _l))

(printf "\nStep 1: Check n <= 0\n")
(printf "n <= 0: %ld\n" (<= n 0))

(printf "\nStep 2: Check n == 1\n")
(printf "n == 1: %ld\n" (== n 1))

(printf "\nStep 3: Call fst\n")
(= {result} (fst _l))
(printf "fst result: %ld\n" result)

(printf "\nStep 4: Try select manually\n")
(= {sel_result} (select
  {(<= n 0) (error "bad")}
  {(== n 1) (fst _l)}
  {otherwise 999}))
(printf "select result: %ld\n" sel_result)

(shutdown 0)
