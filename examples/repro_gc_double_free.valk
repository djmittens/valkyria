(load "src/prelude.valk")

(println "Repro: overflow temp then manual gc-collect")
(def {h0} (heap-usage))
(do
  (def {tmp} (len (range 0 30000)))
  (println "tmp len=%ld" tmp)
)
(println "heap before gc: %ld" h0)
(println "calling gc-collect now")
(println "reclaimed=%ld" (gc-collect))
(memory-stats)
(println "done")
