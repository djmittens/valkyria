{"t": "spec", "spec": "debug-dashboard-validation.md"}
{"t": "task", "id": "t-86eb", "spec": "debug-dashboard-validation.md", "name": "Fix TSAN async handle result/error race", "s": "d", "notes": "Root cause: handle->result and handle->error are plain pointers written by event loop thread (valk_async_handle_complete/fail at aio_async.c:259,292) and read by main thread (valk_async_handle_await_timeout at aio_async.c:492,494). Fix: Make result/error _Atomic pointers in valk_async_handle_t struct (aio.h:46-47) and use atomic_store/atomic_load with release/acquire semantics in writers/readers.", "accept": "make test-c-tsan passes without race warnings on async handle result field", "done_at": "a7c04fd"}
{"t": "task", "id": "t-goo1", "spec": "debug-dashboard-validation.md", "name": "Fix TSAN Chase-Lev deque race", "s": "p", "accept": "make test-c-tsan passes - no race warnings in aio_chase_lev.c"}
{"t": "task", "id": "t-xy5b", "spec": "debug-dashboard-validation.md", "name": "Fix TSAN task queue struct races", "s": "p", "accept": "make test-c-tsan passes - no race warnings in aio_task_queue.c or aio_task.c"}
{"t": "task", "id": "t-cogi", "spec": "debug-dashboard-validation.md", "name": "Fix TSAN region allocator race in system_region", "s": "p", "notes": "Root cause: valk_region_alloc() at gc.c:1228-1229 updates stats.bytes_allocated and stats.alloc_count non-atomically. The system_region in valk_aio_system_t is accessed from both main thread (valk_aio_interval, valk_aio_schedule, valk_async_handle_new) and event loop thread (valk_async_propagate_results via VALK_WITH_ALLOC at aio_combinators.c:838,899). Fix options: (1) Make stats fields _Atomic, (2) Use atomics only for stats updates in valk_region_alloc, (3) Remove stats tracking for cross-thread regions.", "accept": "make test-c-tsan passes - no race warnings in gc.c region allocator"}
{"t": "issue", "id": "i-6qqq", "spec": "debug-dashboard-validation.md", "desc": "TSAN: GC evacuation races (gc.c:1911-2166) - GC evacuation and pointer fixing runs while event loop accesses values"}
{"t": "issue", "id": "i-ee6d", "spec": "debug-dashboard-validation.md", "desc": "TSAN: task queue struct access race (aio_task_queue.c:23-24, aio_task.c:13-17) - task struct fields read by event loop while being written by main thread"}
{"t": "issue", "id": "i-0va4", "spec": "debug-dashboard-validation.md", "desc": "TSAN: Chase-Lev deque race (aio_chase_lev.c:20) - array_get needs atomic load, array_put needs atomic store for correct lock-free behavior"}
{"t": "issue", "id": "i-wehu", "spec": "debug-dashboard-validation.md", "desc": "TSAN: HTTP2 client connect races (aio_http2_client.c:299-341) - reading handle fields after async completion without synchronization"}
{"t": "issue", "id": "i-fagc", "spec": "debug-dashboard-validation.md", "desc": "TSAN: AIO stop race (aio_system.c:371) - valk_aio_stop reads thread state while event loop may still be running"}
{"t": "issue", "id": "i-ok0k", "spec": "debug-dashboard-validation.md", "desc": "TSAN: environment lookup race (parser.c:2193) - valk_lenv_get accesses env while GC may be evacuating"}
{"t": "issue", "id": "i-ieoi", "spec": "debug-dashboard-validation.md", "desc": "ASAN: use-after-free in valk_aio_stop (aio_system.c:367) - after aio/run calls valk_aio_wait_for_shutdown which frees sys, repl.c:143 calls valk_aio_stop on the freed pointer"}
{"t": "issue", "id": "i-zzqz", "spec": "debug-dashboard-validation.md", "desc": "ASAN: memory leak of 24 bytes in 3 atom objects - atoms created via valk_builtin_atom (parser.c:4011) are never freed"}
