{"t": "spec", "spec": "debug-dashboard-validation.md"}
{"t": "task", "id": "t-7h3x", "spec": "debug-dashboard-validation.md", "name": "Add make test-stress target", "s": "d", "notes": "Create Makefile target that runs all stress tests in test/stress/. Should include test_sse_concurrency.valk, test_delta_baseline_isolation.valk, test_checkpoint_timer_stress.valk", "accept": "make test-stress runs all stress/*.valk tests and exits 0", "done_at": "8b54b0c", "decompose": true, "kill": "timeout", "kill_log": "/home/xyzyx/src/valkyria/build/ralph-logs/ralph-20260119_172017-build.log", "priority": "high"}
{"t": "task", "id": "t-iyj5", "spec": "debug-dashboard-validation.md", "name": "Add make test-stress-tsan target", "s": "d", "notes": "Create Makefile target that runs stress tests under ThreadSanitizer. Must redirect TSAN output to file per AGENTS.md. Key tests: test_sse_concurrency.valk, test_delta_baseline_isolation.valk", "accept": "make test-stress-tsan runs stress tests with TSAN, output goes to build/tsan-stress.log, 0 data races", "deps": ["t-7h3x"], "done_at": "c068a04", "priority": "high"}
{"t": "task", "id": "t-xy8l", "spec": "debug-dashboard-validation.md", "name": "Add make test-stress-asan target", "s": "p", "notes": "Create Makefile target that runs stress tests under AddressSanitizer. Must redirect ASAN output to file per AGENTS.md. Key tests: test_sse_concurrency.valk, test_delta_baseline_isolation.valk", "accept": "make test-stress-asan runs stress tests with ASAN, output goes to build/asan-stress.log, 0 memory errors", "deps": ["t-7h3x"], "decompose": true, "kill": "timeout", "kill_log": "/home/xyzyx/src/valkyria/build/ralph-logs/ralph-20260119_173246-build.log", "priority": "high"}
{"t": "task", "id": "t-dx6a", "spec": "debug-dashboard-validation.md", "name": "Add short SSE stress test for CI", "s": "p", "notes": "Current test_sse_concurrency.valk runs 60s, too long for CI. Add test_sse_concurrency_short.valk that runs 10s with same coverage pattern. Can be run in make test-valk.", "accept": "test_sse_concurrency_short.valk passes in <15s, included in make test-valk", "priority": "medium"}
{"t": "task", "id": "t-j2v1", "spec": "debug-dashboard-validation.md", "name": "Run TSAN on existing stress tests", "s": "p", "notes": "Run test_sse_concurrency.valk and test_delta_baseline_isolation.valk under TSAN to identify any data races. Document findings. If races found, create follow-up fix tasks.", "accept": "TSAN report generated, any races documented", "deps": ["t-iyj5"], "priority": "low"}
{"t": "task", "id": "t-5fzs", "spec": "debug-dashboard-validation.md", "name": "Run ASAN on existing stress tests", "s": "p", "notes": "Run test_sse_concurrency.valk and test_delta_baseline_isolation.valk under ASAN to identify any memory errors. Document findings. If errors found, create follow-up fix tasks.", "accept": "ASAN report generated, any errors documented", "deps": ["t-xy8l"], "priority": "low"}
{"t": "task", "id": "t-evd5", "spec": "debug-dashboard-validation.md", "name": "Add pthread-based close race test", "s": "p", "notes": "Existing close race tests in test_stream_body_integration.c are single-threaded. Add true concurrent test using pthreads: spawn 2 threads that both call valk_stream_body_close() simultaneously. Verify no crash, no double-free.", "accept": "New pthread test in test_stream_body_integration.c passes, no TSAN warnings", "priority": "medium"}
{"t": "task", "id": "t-62cg", "spec": "debug-dashboard-validation.md", "name": "Verify stream body LCOV exclusions are justified", "s": "p", "notes": "Review LCOV exclusions in aio_stream_body.c and aio_stream_body_conn.c. Per AGENTS.md, only OOM/platform-failure paths should be excluded. Remove unjustified exclusions and add tests for excluded code that can be tested.", "accept": "All LCOV exclusions in stream body files are for OOM/platform paths only", "priority": "medium"}
{"t": "task", "id": "t-cwlz", "spec": "debug-dashboard-validation.md", "name": "Add debug handler header validation tests", "s": "p", "notes": "test_debug_handler.valk verifies response bodies but not headers. Add tests verifying: /debug/metrics/state returns Content-Type: application/json, Cache-Control: no-cache...; /metrics returns Content-Type: text/plain; version=0.0.4", "accept": "Tests verify correct Content-Type and Cache-Control headers for debug endpoints", "priority": "medium"}
{"t": "task", "id": "t-p3w9", "spec": "debug-dashboard-validation.md", "name": "Add slab/buckets query param tests", "s": "p", "notes": "test_debug_handler.valk tests /debug/slab/buckets with default values only. Add tests with query params: slab=X, start=Y, end=Z, buckets=N to verify parsing works correctly.", "accept": "Tests verify /debug/slab/buckets correctly parses slab, start, end, buckets query params", "priority": "medium"}
{"t": "task", "id": "t-2vd4", "spec": "debug-dashboard-validation.md", "name": "Add debug/reset-state unit tests", "s": "p", "notes": "debug-broadcaster.valk has debug/reset-state for bulk cleanup on session ID change. No explicit unit tests exist. Add tests verifying: session ID increments, old subscribers get cleaned up, new subscribers work after reset.", "accept": "Tests verify debug/reset-state behavior in test_debug_handler.valk", "priority": "low"}
