{"t": "spec", "spec": "debug-dashboard-validation.md"}
{"t": "task", "id": "t-cwlz", "spec": "debug-dashboard-validation.md", "name": "Add debug handler header validation tests", "s": "p", "notes": "test_debug_handler.valk verifies response bodies but not headers. Add tests verifying: /debug/metrics/state returns Content-Type: application/json, Cache-Control: no-cache...; /metrics returns Content-Type: text/plain; version=0.0.4", "accept": "Tests verify correct Content-Type and Cache-Control headers for debug endpoints", "kill": "timeout", "kill_log": "/home/xyzyx/src/valkyria/build/ralph-logs/ralph-20260119_233453-build.log", "priority": "medium", "reject": "Tests exist for endpoints but do NOT verify HTTP headers. No Content-Type or Cache-Control header assertions found."}
{"t": "task", "id": "t-2vd4", "spec": "debug-dashboard-validation.md", "name": "Add debug/reset-state unit tests", "s": "p", "notes": "debug-broadcaster.valk has debug/reset-state for bulk cleanup on session ID change. No explicit unit tests exist. Add tests verifying: session ID increments, old subscribers get cleaned up, new subscribers work after reset.", "accept": "Tests verify debug/reset-state behavior in test_debug_handler.valk", "priority": "low", "reject": "test_debug_handler.valk has no tests for debug/reset-state. No session ID increment, subscriber cleanup, or post-reset tests."}
{"t": "task", "id": "t-76lv", "spec": "debug-dashboard-validation.md", "name": "Add GC coordination integration test", "s": "p", "notes": "Create test/test_gc_aio.c that tests GC triggering after aio/start: 1) Start aio, 2) Trigger GC, 3) Verify no hang. Also test allocation after aio/start triggers auto-GC. Use timeout to catch hangs.", "accept": "Test passes: make build && build/test_gc_aio completes in <5 seconds with exit 0", "deps": ["t-txro"], "priority": "medium", "reject": "test/test_gc_aio.c file does not exist"}
{"t": "issue", "id": "i-7any", "spec": "debug-dashboard-validation.md", "desc": "Bug: valk_http2_send_response() ignores cache-control header. Only :status and :content-type are sent. The streaming response builder (aio_stream_builtins.c) supports cache-control but the regular response builder (aio_http2_session.c:valk_http2_send_response) does not. This means /debug/metrics/state does not send Cache-Control headers despite specifying them in debug.valk."}
{"t": "reject", "id": "t-iyj5", "done_at": "c068a04", "reason": "TSAN reports 10 data races in memory.c and aio_async.c, acceptance requires 0 races"}
{"t": "reject", "id": "t-evd5", "done_at": "e1a1bee", "reason": "No pthread_create in test - test calls close sequentially, not from 2 concurrent threads"}
{"t": "reject", "id": "t-cwlz", "done_at": "e0da374", "reason": "No Content-Type or Cache-Control header validation in test_debug_handler.valk"}
{"t": "reject", "id": "t-p3w9", "done_at": "dd9ec4c", "reason": "No slab query param tests (slab=, start=, end=, buckets=) in test_debug_handler.valk"}
{"t": "reject", "id": "t-2vd4", "done_at": "31858f2", "reason": "No reset-state tests found in test_debug_handler.valk"}
{"t": "reject", "id": "t-76lv", "done_at": "26ea627", "reason": "test/test_gc_aio.c does not exist - only test_gc_aio_debug.c and test_gc_aio_hang.c exist"}
{"t": "reject", "id": "t-4ec8", "done_at": "1d7fdaf", "reason": "/tmp/gc_aio_analysis.md does not exist"}
{"t": "reject", "id": "t-joav", "done_at": "3bc1d14", "reason": "Test times out after 30s, doesn't complete in 15s as required"}
{"t": "reject", "id": "t-kaka", "done_at": "7a2c89b", "reason": "After mem/gc/collect, builtin + is not bound - GC still frees builtins"}
{"t": "reject", "id": "t-hmqm", "done_at": "55d8499", "reason": "make test times out after 5 minutes - does not complete successfully"}
{"t": "reject", "id": "t-cwlz", "done_at": "2f74afe", "reason": "Tests exist for endpoints but do NOT verify HTTP headers. No Content-Type or Cache-Control header assertions found."}
{"t": "reject", "id": "t-2vd4", "done_at": "cac1b52", "reason": "test_debug_handler.valk has no tests for debug/reset-state. No session ID increment, subscriber cleanup, or post-reset tests."}
{"t": "reject", "id": "t-76lv", "done_at": "c999b7d", "reason": "test/test_gc_aio.c file does not exist"}
{"t": "reject", "id": "t-4ec8", "done_at": "756f598", "reason": "File /tmp/gc_aio_analysis.md does not exist"}
