{"t": "spec", "spec": "debug-dashboard-validation.md"}
{"t": "task", "id": "t-q9ow", "spec": "debug-dashboard-validation.md", "name": "Fix SIGSEGV in valk_lval_eval_iterative during HTTP2 callback", "s": "d", "notes": "Crash at parser.c:1367 during callback evaluation in event loop thread. Backtrace shows crash in valk_lval_eval_iterative called from __http2_client_request_response_done. Likely GC-related: callback env may be freed. Use ASAN to diagnose.", "accept": "make test-c-asan and make test-valk-asan pass without memory errors", "done_at": "ded9e15"}
{"t": "task", "id": "t-b4cj", "spec": "debug-dashboard-validation.md", "name": "Clean up debug prints in test_debug_handler.valk", "s": "d", "accept": "No DEBUG: prints in test_debug_handler.valk except any that were original", "deps": ["t-q9ow"], "done_at": "8c3eb91"}
{"t": "task", "id": "t-gbwo", "spec": "debug-dashboard-validation.md", "name": "Verify debug_handler tests pass reliably (5 runs)", "s": "d", "accept": "5 consecutive runs all show 36 passed, 0 failed", "deps": ["t-aoar", "t-b4cj"], "done_at": "e928b5b", "reject": "Depends on t-aoar which fails - test_debug_handler.valk hangs and times out, cannot complete 5 consecutive runs"}
{"t": "task", "id": "t-7jok", "spec": "debug-dashboard-validation.md", "name": "Fix the identified hang in test_debug_handler.valk", "s": "d", "notes": "Apply fix based on diagnosis from previous task. This may involve: fixing a callback, fixing event loop coordination, fixing GC interaction, or fixing test setup.", "accept": "timeout 30 build/valk test/test_debug_handler.valk shows test output (passed/failed counts)", "deps": ["t-rvxn"], "done_at": "7cffb28"}
{"t": "task", "id": "t-1aq3", "spec": "debug-dashboard-validation.md", "name": "Verify test_debug_handler.valk passes with exit 0", "s": "d", "notes": "Run test with 30s timeout and confirm it shows passed tests and exits cleanly.", "accept": "timeout 30 build/valk test/test_debug_handler.valk completes with exit 0", "deps": ["t-7jok"], "done_at": "a5a4542"}
{"t": "task", "id": "t-ix81", "spec": "debug-dashboard-validation.md", "name": "Add str/slice function to prelude.valk", "s": "d", "notes": "test_debug_handler.valk line 944 uses str/slice which doesnt exist. Create a simple substring function in prelude.valk that extracts a slice from a string. Previous iteration confirmed str/slice is not defined anywhere in the codebase.", "accept": "build/valk -c (load src/prelude.valk) (print (str/slice hello-world 0 5)) prints hello", "done_at": "b26339a"}
{"t": "task", "id": "t-g7tk", "spec": "debug-dashboard-validation.md", "name": "Fix the hang in test_debug_handler.valk", "s": "d", "notes": "Apply the fix based on the diagnosis from t-o8gx. The hang is likely in: (1) loading a module, (2) test framework setup, (3) http server startup, or (4) first test execution.", "accept": "timeout 30 build/valk test/test_debug_handler.valk shows PASS/FAIL output lines", "deps": ["t-o8gx"], "done_at": "969d68f"}
{"t": "task", "id": "t-nnv2", "spec": "debug-dashboard-validation.md", "name": "Add pending-test tracking to find stuck tests", "s": "d", "notes": "Modify test_debug_handler.valk to print test name when starting AND when completing each parallel test. This will reveal which tests never complete. Add: (printf \"START: %s\\n\" test-name) in start-one-main-test before calling test-body, and similar in done-fn. Run with 30s timeout to see which tests start but never finish.", "accept": "Can identify by name which specific tests are not completing", "done_at": "07ff2ef"}
{"t": "task", "id": "t-5gk8", "spec": "debug-dashboard-validation.md", "name": "Verify test_debug_handler completes and cleanup diagnostics", "s": "p", "notes": "Run timeout 60 build/valk test/test_debug_handler.valk and verify it shows passed/failed summary and exits cleanly. Remove all DIAG: print statements added during debugging. Then run make test to verify no regressions.", "accept": "test_debug_handler.valk completes with exit 0, no DIAG prints remain, make test passes", "deps": ["t-wh8q"]}
{"t": "task", "id": "t-5w79", "spec": "debug-dashboard-validation.md", "name": "Fix /metrics content tests (5 tests)", "s": "p", "notes": "Fix these tests that start but never call done-fn: /metrics contains http_ metrics (line 331), /metrics has valid Prometheus HELP lines (line 349), /metrics has valid Prometheus TYPE lines (line 367), /metrics TYPE lines have valid metric types (line 385), /metrics contains valk_loop_iterations_total metric (line 422). These tests make HTTP requests to /metrics and check the response body for specific content. The callback is likely not firing or throwing. Debug by adding print statements in the callback to see if it gets called.", "accept": "Running test shows DONE for all 5 /metrics content tests", "kill": "timeout", "kill_log": "/home/xyzyx/src/valkyria/build/ralph-logs/ralph-20260120_043557-build.log"}
{"t": "task", "id": "t-88xp", "spec": "debug-dashboard-validation.md", "name": "Fix SSE diagnostics tests (3 tests)", "s": "p", "notes": "Fix these tests: /debug/diagnostics/memory SSE second event is diagnostics-delta (line 508), /debug/diagnostics/memory SSE events have valid JSON (line 553), SSE handler lifecycle: reconnect works after disconnect (line 642). These tests use SSE streaming endpoints and likely have issues with the SSE callback not completing or event parsing failing.", "accept": "Running test shows DONE for all 3 SSE diagnostics tests", "deps": ["t-5w79"]}
{"t": "task", "id": "t-sery", "spec": "debug-dashboard-validation.md", "name": "Fix remaining 3 stuck tests", "s": "p", "notes": "Fix: /debug/slab/buckets returns JSON (line 605), SSE handler lifecycle: timer stops after disconnect (line 694), debug/reset-state: old subscribers stop after session ID change (line 760). These are individual tests with different issues.", "accept": "Running test shows DONE for all 3 remaining stuck tests", "deps": ["t-88xp"]}
{"t": "reject", "id": "t-iyj5", "done_at": "c068a04", "reason": "TSAN reports 10 data races in memory.c and aio_async.c, acceptance requires 0 races"}
{"t": "reject", "id": "t-evd5", "done_at": "e1a1bee", "reason": "No pthread_create in test - test calls close sequentially, not from 2 concurrent threads"}
{"t": "reject", "id": "t-cwlz", "done_at": "e0da374", "reason": "No Content-Type or Cache-Control header validation in test_debug_handler.valk"}
{"t": "reject", "id": "t-p3w9", "done_at": "dd9ec4c", "reason": "No slab query param tests (slab=, start=, end=, buckets=) in test_debug_handler.valk"}
{"t": "reject", "id": "t-2vd4", "done_at": "31858f2", "reason": "No reset-state tests found in test_debug_handler.valk"}
{"t": "reject", "id": "t-76lv", "done_at": "26ea627", "reason": "test/test_gc_aio.c does not exist - only test_gc_aio_debug.c and test_gc_aio_hang.c exist"}
{"t": "reject", "id": "t-4ec8", "done_at": "1d7fdaf", "reason": "/tmp/gc_aio_analysis.md does not exist"}
{"t": "reject", "id": "t-joav", "done_at": "3bc1d14", "reason": "Test times out after 30s, doesn't complete in 15s as required"}
{"t": "reject", "id": "t-kaka", "done_at": "7a2c89b", "reason": "After mem/gc/collect, builtin + is not bound - GC still frees builtins"}
{"t": "reject", "id": "t-hmqm", "done_at": "55d8499", "reason": "make test times out after 5 minutes - does not complete successfully"}
{"t": "reject", "id": "t-cwlz", "done_at": "2f74afe", "reason": "Tests exist for endpoints but do NOT verify HTTP headers. No Content-Type or Cache-Control header assertions found."}
{"t": "reject", "id": "t-2vd4", "done_at": "cac1b52", "reason": "test_debug_handler.valk has no tests for debug/reset-state. No session ID increment, subscriber cleanup, or post-reset tests."}
{"t": "reject", "id": "t-76lv", "done_at": "c999b7d", "reason": "test/test_gc_aio.c file does not exist"}
{"t": "reject", "id": "t-4ec8", "done_at": "756f598", "reason": "File /tmp/gc_aio_analysis.md does not exist"}
{"t": "reject", "id": "t-2vd4", "done_at": "cbf8c54", "reason": "No debug/reset-state tests exist in test_debug_handler.valk - missing session ID increment test, old subscriber cleanup test, and new subscribers after reset test"}
{"t": "reject", "id": "t-76lv", "done_at": "76c8374", "reason": "test/test_gc_aio.c does not exist - only found similar files test_gc_aio_hang.c, test_gc_aio_debug.c"}
{"t": "reject", "id": "t-wdmq", "done_at": "719d2d6", "reason": "No Cache-Control header test exists in test_debug_handler.valk - the get-header helper exists but is only used for Content-Type checks"}
{"t": "reject", "id": "t-m8th", "done_at": "50168cc", "reason": "Only 28/31 tests pass; 3 tests have TIMEOUT status: diagnostics/memory SSE second event, diagnostics/memory SSE events valid JSON, Broadcaster multiple connections"}
{"t": "reject", "id": "t-2vd4", "done_at": "49d8e37", "reason": "No tests for debug/reset-state exist in test_debug_handler.valk or any other test file"}
{"t": "reject", "id": "t-76lv", "done_at": "92ff32b", "reason": "build/test_gc_aio binary does not exist; test_gc_aio.c was never created (test_gc_aio_hang exists but has different name)"}
{"t": "reject", "id": "t-wdmq", "done_at": "9570f39", "reason": "No test verifies Cache-Control header on /debug/metrics/state endpoint"}
{"t": "reject", "id": "t-m8th", "done_at": "15f61a1", "reason": "Only 29/31 tests pass; 2 tests timed out"}
{"t": "reject", "id": "t-2fwh", "done_at": "53828d0", "reason": "Only 28/31 tests pass; 3 tests timed out with TIMEOUT lines in output"}
{"t": "reject", "id": "t-ah2k", "done_at": "f1863ba", "reason": "Test missing assertion to verify callback never runs after cancellation"}
{"t": "reject", "id": "t-2vd4", "done_at": "06c4a84", "reason": "No tests for debug/reset-state exist in test_debug_handler.valk. Missing required tests for: session ID increments, old subscriber cleanup, new subscribers after reset."}
{"t": "reject", "id": "t-76lv", "done_at": "5adedae", "reason": "test/test_gc_aio.c does not exist. No test binary was created."}
{"t": "reject", "id": "t-wdmq", "done_at": "f3ca2b7", "reason": "No test exists that verifies the Cache-Control header. Only implementation exists in debug.valk but no test in test_debug_handler.valk."}
{"t": "reject", "id": "t-m8th", "done_at": "91f16b4", "reason": "Only 28/31 tests pass. 3 tests timed out: memory SSE events, SSE handler lifecycle, and Broadcaster multiple connections."}
{"t": "reject", "id": "t-wdmq", "done_at": "2fb2b36", "reason": "Task was marked done but Cache-Control test was never added to test_debug_handler.valk. The iteration timed out while doing VERIFY stage work instead of implementing the test."}
{"t": "reject", "id": "t-m8th", "done_at": "fa36d52", "reason": "6 tests still timeout (SSE-related), 1 Broadcaster test fails (missing delta events)"}
{"t": "reject", "id": "t-2fwh", "done_at": "404e114", "reason": "6 tests still timeout (SSE-related), 1 Broadcaster test fails"}
{"t": "reject", "id": "t-2fwh", "done_at": "5d97191", "reason": "6 SSE tests still timing out; test shows 30/36 passed not 31/31"}
{"t": "reject", "id": "t-zqmp", "done_at": "6bfb1f4", "reason": "All 5 SSE tests still timing out instead of passing"}
{"t": "reject", "id": "t-krq9", "done_at": "11ae32d", "reason": "5 tests timed out; acceptance criteria requires all 36 pass"}
{"t": "reject", "id": "t-2fwh", "done_at": "14517d3", "reason": "Acceptance criteria not met: 29/36 tests passed, 1 failed, 6 timed out. The timer cancellation fix may be working but there are other issues blocking tests: 1 broadcaster delta event failure and 6 SSE-related timeouts. These are covered by other pending tasks (t-zun3 for delta events, t-zqmp for SSE timeouts)."}
{"t": "reject", "id": "t-vig0", "done_at": "7b130e3", "reason": "Test hangs during initialization before 'Main tests done' message appears. Forward reference fix is in place but test never reaches completion."}
{"t": "reject", "id": "t-edw7", "done_at": "899b917", "reason": "Test hangs with exit code 124 (timeout) after 'DEBUG: about to call len on main-tests'. Does not complete within 30 seconds."}
{"t": "reject", "id": "t-1oc2", "done_at": "7706e70", "reason": "Debug print was NOT added to valk_builtin_len. The function has no fprintf/debug output at entry point before LVAL_ASSERT_COUNT_EQ."}
{"t": "reject", "id": "t-ym1m", "done_at": "c4bce44", "reason": "Task notes unchanged from placeholder text. No function name, line number, condition, or fix approach documented."}
{"t": "reject", "id": "t-1oc2", "done_at": "4767e40", "reason": "Debug print was NOT added to valk_builtin_len. The function has no debug print - it starts with UNUSED(e); then LVAL_ASSERT_COUNT_EQ. The test now crashes (dumps core) rather than hangs, with no debug output."}
{"t": "reject", "id": "t-aoar", "done_at": "98acc64", "reason": "Test hangs after 60 seconds with exit code 124 (timeout). Does not complete with exit 0 as required."}
{"t": "reject", "id": "t-gbwo", "done_at": "de82ca9", "reason": "Depends on t-aoar which fails - test_debug_handler.valk hangs and times out, cannot complete 5 consecutive runs"}
